import{a as i,r as n,j as e}from"./app-D5LrGWPf.js";import{l as D}from"./index-DEk-pZwc.js";/* empty css                   */const S=async()=>{try{return(await i.get("/roles")).data.data}catch(a){throw console.error("Fetch roles error:",a.response?.data||a.message),a}},k=async a=>{try{return(await i.post("/roles",a)).data.data}catch(s){throw console.error("Create role error:",s.response?.data||s.message),s}},C=async(a,s)=>{try{return(await i.put(`/roles/${a}`,s)).data.data}catch(o){throw console.error("Update role error:",o.response?.data||o.message),o}},E=async a=>{try{return(await i.delete(`/roles/${a}`)).data}catch(s){throw console.error("Delete role error:",s.response?.data||s.message),s}},F=()=>{const[a,s]=n.useState([]),[o,x]=n.useState(!1),[l,d]=n.useState({name:"",description:"",guard_name:"web"}),[c,p]=n.useState(null),[b,m]=n.useState(""),g=n.useRef(null),y=D.useReactToPrint({contentRef:g,documentTitle:"Daftar Role"}),h=async()=>{try{x(!0);const r=await S();s(r)}catch(r){console.error("Fetch roles error:",r)}finally{x(!1)}};n.useEffect(()=>{h()},[]);const u=r=>{const{name:t,value:R}=r.target;d(v=>({...v,[t]:R}))},j=async r=>{if(r.preventDefault(),m(""),!l.name.trim()){m("Nama role wajib diisi");return}try{c?await C(c,l):await k(l),d({name:"",description:"",guard_name:"web"}),p(null),h()}catch(t){console.error("Save role error:",t),m(t.response?.data?.message||"Gagal menyimpan role")}},f=r=>{d({name:r.name,description:r.description||"",guard_name:r.guard_name||"web"}),p(r.id)},w=async r=>{if(window.confirm("Yakin ingin menghapus role ini?"))try{await E(r),h()}catch(t){console.error("Delete role error:",t),alert(t.response?.data?.message||"Gagal menghapus role")}},N=new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});return e.jsxs("div",{className:"min-h-screen p-4 bg-gray-50 text-[14px]",children:[e.jsx("h2",{className:"text-[16px] font-bold mb-4",children:"Manajemen Role"}),e.jsxs("div",{className:"bg-white p-4 rounded shadow mb-6 max-w-md no-print",children:[e.jsx("h3",{className:"font-semibold mb-2",children:c?"Edit Role":"Tambah Role"}),b&&e.jsx("p",{className:"text-red-500 mb-2",children:b}),e.jsxs("form",{onSubmit:j,className:"space-y-2",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Nama Role",value:l.name,onChange:u,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"text",name:"description",placeholder:"Deskripsi",value:l.description,onChange:u,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{name:"guard_name",value:l.guard_name,onChange:u,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"web",children:"web"}),e.jsx("option",{value:"sanctum",children:"sanctum"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:c?"Update":"Tambah"}),c&&e.jsx("button",{type:"button",onClick:()=>{d({name:"",description:"",guard_name:"web"}),p(null)},className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500",children:"Batal"})]})]})]}),e.jsx("div",{className:"mb-4 no-print",children:e.jsx("button",{onClick:y,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Print"})}),e.jsxs("div",{ref:g,className:"bg-white p-4 rounded shadow max-w-3xl",children:[e.jsxs("div",{className:"print-only text-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Laporan Daftar Role"}),e.jsxs("p",{children:["Tanggal cetak: ",N]})]}),e.jsxs("table",{className:"w-full table-auto border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-4 py-2 text-left",children:"#"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Nama Role"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Deskripsi"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Guard"}),e.jsx("th",{className:"border px-4 py-2 text-left no-print",children:"Aksi"})]})}),e.jsx("tbody",{children:o?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-4",children:"Loading..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-4",children:"Tidak ada data"})}):a.map((r,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",children:t+1}),e.jsx("td",{className:"border px-4 py-2",children:r.name}),e.jsx("td",{className:"border px-4 py-2",children:r.description||"-"}),e.jsx("td",{className:"border px-4 py-2",children:r.guard_name}),e.jsxs("td",{className:"border px-4 py-2 space-x-2 no-print",children:[e.jsx("button",{onClick:()=>f(r),className:"px-2 py-1 bg-yellow-400 text-white rounded hover:bg-yellow-500",children:"Edit"}),e.jsx("button",{onClick:()=>w(r.id),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Hapus"})]})]},r.id))})]})]})]})};export{F as default};
