import{k as f,u as w,r as i,j as a}from"./app-D5LrGWPf.js";import{l as y}from"./index-DEk-pZwc.js";import{P as N}from"./PrintHeader-Cbn4AnHI.js";const _={no_induk_absen:"No Absen",nama:"Nama",status_upah:"Status Upah",status_karyawan:"Status Karyawan",masuk_kerja:"Tanggal Masuk",ditetapkan:"Tanggal Ditetapkan",bagian:"Bagian",sub_bagian:"Sub Bagian",kelompok_kerja:"Kelompok Kerja",pekerjaan:"Pekerjaan",alamat_rt_rw:"Alamat RT/RW",alamat_desa:"Desa",alamat_kecamatan:"Kecamatan",alamat_kabupaten:"Kabupaten",no_nik:"NIK",no_kk:"No KK",kelamin:"Jenis Kelamin",tempat_lahir:"Tempat Lahir",tanggal_lahir:"Tanggal Lahir",pendidikan:"Pendidikan",disabilitas:"Disabilitas",kpi:"KPI",no_bpjs_kes:"No BPJS Kesehatan",no_kpj:"No KPJ",no_hp:"No HP",whatsapp_number:"WhatsApp",email:"Email",bank:"Bank",no_bank:"No Rekening",vaksin:"Vaksin",riwayat_kesehatan:"Riwayat Kesehatan"};function P(){const{id:d}=f(),o=w(),c=i.useRef(),[s,x]=i.useState(null),[h,m]=i.useState(!0),[p,u]=i.useState(null),g=t=>{if(!t)return"-";const e=new Date(t),r=new Date;let n=r.getFullYear()-e.getFullYear();const l=r.getMonth()-e.getMonth();return(l<0||l===0&&r.getDate()<e.getDate())&&n--,`${n} tahun`},b=t=>{if(!t)return"-";const e=new Date(t),n=new Date-e,l=Math.floor(n/(1e3*60*60*24*365.25)),k=Math.floor(n%(1e3*60*60*24*365.25)/(1e3*60*60*24*30.44));return`${l} th ${k} bln`};i.useEffect(()=>{const t=localStorage.getItem("token");if(!t){o("/auth/login");return}fetch(`/api/karyawan/${d}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}).then(e=>e.json()).then(e=>{e.success&&e.data?x(e.data):u("Data tidak ditemukan."),m(!1)}).catch(()=>{u("Gagal memuat detail karyawan"),m(!1)})},[d,o]);const j=y.useReactToPrint({contentRef:c,documentTitle:`Detail Karyawan - ${s?.nama||"..."}`});return h?a.jsx("p",{className:"text-center mt-6 text-gray-600",children:"Memuat data..."}):p?a.jsx("p",{className:"text-red-500 text-center mt-6 font-medium",children:p}):s?a.jsxs("div",{className:"max-w-[210mm] mx-auto px-6 py-8 bg-white",children:[a.jsxs("div",{className:"mb-6 flex justify-end gap-2 no-print",children:[a.jsx("button",{onClick:()=>o("/karyawan/list"),className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Kembali"}),a.jsx("button",{onClick:()=>o(`/karyawan/edit/${d}`),className:"px-6 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 transition",children:"Edit"}),a.jsx("button",{onClick:j,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition",children:"Cetak"})]}),a.jsxs("div",{ref:c,className:"detail-print laporan-content print:px-0 print:py-0 print:shadow-none print:rounded-none",children:[a.jsx("div",{className:"print-header",children:a.jsx(N,{})}),a.jsx("div",{className:"laporan-title",children:"Detail Karyawan"}),a.jsxs("div",{className:"grid grid-cols-[120px_1fr] gap-6 items-start mb-6",children:[a.jsxs("div",{className:"w-full",children:[a.jsx("img",{src:s.foto_formal||"/default-avatar.png",alt:"Foto Formal",className:"w-full aspect-[2/3] object-cover border rounded"}),a.jsx("p",{className:"mt-2 text-xs text-gray-600 text-center",children:"Foto Formal 4x6"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-1 text-sm",children:[a.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 shadow-sm print:shadow-none",children:[a.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:"Umur"}),a.jsx("div",{className:"text-[13px] font-medium text-gray-800",children:g(s.tanggal_lahir)})]}),a.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 shadow-sm print:shadow-none",children:[a.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:"Masa Kerja"}),a.jsx("div",{className:"text-[13px] font-medium text-gray-800",children:b(s.masuk_kerja)})]}),Object.entries(s).map(([t,e])=>{if(["foto_formal","id"].includes(t))return null;const r=_[t]||t.replace(/_/g," "),n=typeof e=="object"&&e!==null?Array.isArray(e)?e.join(", "):JSON.stringify(e):e||"-";return a.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 shadow-sm print:shadow-none",children:[a.jsx("div",{className:"text-[11px] text-gray-500 mb-0.5",children:r}),a.jsx("div",{className:"text-[13px] font-medium text-gray-800",children:n})]},t)})]})]}),a.jsxs("div",{className:"no-date text-[11px] text-gray-500 mt-4",children:["Dicetak:"," ",new Date().toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"})]})]})]}):a.jsx("p",{className:"text-center mt-6 text-gray-500",children:"Data kosong."})}export{P as default};
