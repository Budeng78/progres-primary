import{a as c,r as o,j as e}from"./app-D5LrGWPf.js";import{y as n}from"./index-_iQ4wFyz.js";const p={getProfile:()=>c.get("/profile").then(s=>s.data),updateProfile:s=>c.put("/profile/update-profile",s).then(l=>l.data),uploadFotoProfile:s=>c.post("/profile/upload-foto-profile",s,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>l.data),resetPasswordViaOtp:s=>c.post("/otp/reset-password",s).then(l=>l.data)},S=()=>{const[s,l]=o.useState(!1),[i,d]=o.useState(!1),[r,f]=o.useState(null),[h,x]=o.useState(null),[b,g]=o.useState(null),u=async()=>{try{l(!0);const a=await p.getProfile();a.success&&f(a.data.user)}catch(a){console.error(a),n.error("Gagal memuat data profil")}finally{l(!1)}};o.useEffect(()=>{u()},[]);const m=a=>{const{name:t,value:w}=a.target;f(N=>({...N,[t]:w}))},y=a=>{const t=a.target.files[0];t&&(x(t),g(URL.createObjectURL(t)))},j=async()=>{if(!h){n.error("Pilih foto terlebih dahulu");return}const a=new FormData;a.append("foto_profile",h);try{d(!0);const t=await p.uploadFotoProfile(a);n.success(t.message||"Foto berhasil diupload"),u(),x(null),g(null)}catch(t){console.error(t),n.error("Gagal upload foto")}finally{d(!1)}},v=async a=>{a.preventDefault();try{d(!0);const t=await p.updateProfile(r);n.success(t.message||"Profil berhasil diperbarui"),u()}catch(t){console.error(t),n.error("Gagal menyimpan profil")}finally{d(!1)}};return s?e.jsx("div",{className:"text-center py-8",children:"Memuat data..."}):e.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow-md p-6 space-y-6",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-700",children:"Profil Pengguna"}),r&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:b||r.foto_profile||"/default-avatar.png",alt:"Foto Profil",className:"w-20 h-20 rounded-full object-cover border"}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:y}),e.jsx("button",{onClick:j,disabled:i,className:"mt-2 bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:i?"Mengupload...":"Upload Foto"})]})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Nama"}),e.jsx("input",{name:"name",value:r?.name||"",onChange:m,className:"border rounded-lg px-3 py-2 w-full text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Email"}),e.jsx("input",{name:"email",type:"email",value:r?.email||"",onChange:m,className:"border rounded-lg px-3 py-2 w-full text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Nomor WhatsApp"}),e.jsx("input",{name:"whatsapp_number",value:r?.whatsapp_number||"",onChange:m,className:"border rounded-lg px-3 py-2 w-full text-sm"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:i,className:`${i?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} text-white px-4 py-2 rounded-lg text-sm`,children:i?"Menyimpan...":"Simpan Perubahan"})})]})]})};export{S as default};
