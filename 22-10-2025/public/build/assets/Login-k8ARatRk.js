import{r as n,u as b,A as f,j as e,L as m,a as w}from"./app-D5LrGWPf.js";const N=()=>{const[a,p]=n.useState({login:"",password:""}),[u,o]=n.useState(null),[l,d]=n.useState(!1),g=b(),{login:x}=n.useContext(f),c=i=>{const{name:s,value:t}=i.target;p(r=>({...r,[s]:t}))},h=async i=>{if(i.preventDefault(),o(null),!a.login||!a.password){o("Email/WhatsApp dan password wajib diisi.");return}d(!0);try{const s=await w.post("/login",{login:a.login,password:a.password}),t=s.data?.access_token,r=s.data?.data?.user;if(!t||!r)throw new Error("Token atau data user tidak ditemukan");x(t,r),g("/")}catch(s){console.error("Login attempt failed."),o(s.response?.data?.message||s.response?.data?.errors?.login?.[0]||s.message||"Login gagal")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4",children:e.jsxs("form",{onSubmit:h,className:"bg-white p-6 rounded shadow-md w-full max-w-sm",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Login"}),u&&e.jsx("p",{className:"text-red-500 text-center mb-4",children:u}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",name:"login",placeholder:"Email atau WhatsApp",value:a.login,onChange:c,autocomplete:"current-email",className:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})}),e.jsx("div",{className:"mb-2",children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:a.password,onChange:c,autocomplete:"current-password",className:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})}),e.jsx("div",{className:"text-right mb-6",children:e.jsx(m,{to:"/auth/forgot-password",className:"text-sm text-blue-600 hover:text-blue-800",children:"Lupa Password?"})}),e.jsx("button",{type:"submit",disabled:l,className:`w-full py-2 text-white rounded ${l?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:l?"Sedang masuk...":"Masuk"}),e.jsxs("p",{className:"mt-4 text-sm text-center",children:["Belum punya akun?"," ",e.jsx(m,{to:"/auth/register",className:"text-blue-600 hover:underline",children:"Daftar"})]})]})})};export{N as default};
