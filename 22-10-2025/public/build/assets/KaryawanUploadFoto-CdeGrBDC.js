import{r as i,u as w,j as e}from"./app-D5LrGWPf.js";const F=({message:l,type:g})=>l?e.jsx("div",{className:`mt-4 p-3 rounded-lg font-bold text-center ${g==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:l}):null,S=()=>{const[l,g]=i.useState(null),[f,h]=i.useState(null),[x,m]=i.useState(null),[b,p]=i.useState(null),[d,c]=i.useState(!1);w();const t=(a,s)=>{m(a),p(s),setTimeout(()=>{m(null),p(null)},3e3)},y=async a=>{if(a.preventDefault(),!l){t("Pilih file foto profil terlebih dahulu!","error");return}const s=localStorage.getItem("id"),u=localStorage.getItem("token"),r=new FormData;r.append("id",s),r.append("foto_profile",l);try{c(!0);const o=await fetch("/api/karyawan/upload-profile-photo",{method:"POST",headers:{Authorization:`Bearer ${u}`},body:r}),n=await o.json();o.ok?(t("✅ Foto profil berhasil diunggah!","success"),console.log("Foto profil:",n)):t(n.message||"❌ Gagal upload foto profil","error")}catch(o){console.error(o),t("⚠️ Terjadi kesalahan jaringan saat upload foto profil.","error")}finally{c(!1)}},j=async a=>{if(a.preventDefault(),!f){t("Pilih file foto formal terlebih dahulu!","error");return}const s=localStorage.getItem("id"),u=localStorage.getItem("token"),r=new FormData;r.append("id",s),r.append("foto_formal",f);try{c(!0);const o=await fetch("/api/karyawan/upload-formal-photo",{method:"POST",headers:{Authorization:`Bearer ${u}`},body:r}),n=await o.json();o.ok?(t("✅ Foto formal berhasil diunggah!","success"),console.log("Foto formal:",n)):t(n.message||"❌ Gagal upload foto formal","error")}catch(o){console.error(o),t("⚠️ Terjadi kesalahan jaringan saat upload foto formal.","error")}finally{c(!1)}};return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-gray-800 p-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg text-center w-full max-w-lg",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-900",children:"Uji API Unggah Foto"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Unggah foto profil & formal karyawan."}),e.jsxs("form",{onSubmit:y,className:"space-y-4 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Foto Profil"}),e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:a=>g(a.target.files[0]),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"}),e.jsx("button",{type:"submit",disabled:d,className:"w-full py-2 px-4 rounded-md font-semibold text-white bg-blue-600 hover:bg-blue-700",children:d?"Mengunggah...":"Unggah Foto Profil"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Foto Formal"}),e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:a=>h(a.target.files[0]),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"}),e.jsx("button",{type:"submit",disabled:d,className:"w-full py-2 px-4 rounded-md font-semibold text-white bg-green-600 hover:bg-green-700",children:d?"Mengunggah...":"Unggah Foto Formal"})]}),e.jsx(F,{message:x,type:b})]})})};export{S as default};
