import{u as v,r as o,j as e}from"./app-D5LrGWPf.js";import{y as d}from"./index-_iQ4wFyz.js";import{k as N}from"./karyawan-XnhpqS-l.js";const D=()=>{const i=v(),b=()=>{const s=Math.floor(1e3+Math.random()*9e3);return`NIA${Date.now().toString().slice(-6)}${s}`},[t,h]=o.useState({no_induk_absen:b(),nama:"",kelamin:"",status_karyawan:"",status_upah:"",masuk_kerja:"",alamat_desa:""}),[c,g]=o.useState(null),[u,y]=o.useState(null),[m,x]=o.useState(!1),l=s=>{const{name:a,value:n}=s.target;h(r=>({...r,[a]:n}))},f=s=>{const a=s.target.files[0];a&&(g(a),y(URL.createObjectURL(a)))},j=async s=>{if(s.preventDefault(),!t.no_induk_absen){d.error("Nomor induk absen wajib diisi");return}x(!0);try{const a=new FormData;Object.entries(t).forEach(([k,w])=>{a.append(k,w??"")}),c&&a.append("foto_formal",c);const n=await N.create(a),r=n?.data?.data??n?.data??(n&&n.data)??null,p=r?.id??r?.ID??null;d.success("Karyawan berhasil ditambahkan!"),i(p?`/karyawan/detail/${p}`:"/karyawan/list")}catch(a){console.error("Gagal menambah karyawan:",a),d.error("Gagal menyimpan data. Cek kembali form atau lihat pesan error.")}finally{x(!1)}};return e.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-md rounded-xl p-6",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Tambah Data Karyawan"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nomor Induk Absen ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"no_induk_absen",value:t.no_induk_absen,onChange:l,className:"border rounded-lg px-3 py-2 w-full text-sm",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap"}),e.jsx("input",{type:"text",name:"nama",value:t.nama,onChange:l,placeholder:"Masukkan nama karyawan",className:"border rounded-lg px-3 py-2 w-full text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jenis Kelamin"}),e.jsxs("select",{name:"kelamin",value:t.kelamin,onChange:l,className:"border rounded-lg px-3 py-2 w-full text-sm",children:[e.jsx("option",{value:"",children:"-- Pilih --"}),e.jsx("option",{value:"L",children:"Laki-laki"}),e.jsx("option",{value:"P",children:"Perempuan"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status Karyawan"}),e.jsx("input",{type:"text",name:"status_karyawan",value:t.status_karyawan,onChange:l,placeholder:"Contoh: Tetap / Kontrak",className:"border rounded-lg px-3 py-2 w-full text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat Desa"}),e.jsx("input",{type:"text",name:"alamat_desa",value:t.alamat_desa,onChange:l,placeholder:"Nama desa tempat tinggal",className:"border rounded-lg px-3 py-2 w-full text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Foto Formal"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"file",name:"foto_formal",accept:"image/*",capture:"environment",onChange:f,className:"border rounded-lg px-3 py-2 text-sm"}),u&&e.jsx("img",{src:u,alt:"Preview",className:"w-16 h-16 rounded-lg object-cover border"})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i("/karyawan/list"),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-lg text-sm",children:"Batal"}),e.jsx("button",{type:"submit",disabled:m,className:`${m?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} text-white px-4 py-2 rounded-lg text-sm`,children:m?"Menyimpan...":"Simpan"})]})]})]})};export{D as default};
