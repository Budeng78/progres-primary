import{r as n,j as e,a as o}from"./app-D5LrGWPf.js";import{l as S}from"./index-DEk-pZwc.js";/* empty css                   */const C=()=>{const[p,b]=n.useState([]),[g,x]=n.useState(!1),[t,i]=n.useState({name:"",description:"",guard_name:"web"}),[r,l]=n.useState(null),[u,d]=n.useState(""),h=n.useRef(null),y=S.useReactToPrint({contentRef:h,documentTitle:"Daftar Permission"}),c=async()=>{try{x(!0);const s=await o.get("/permissions"),a=Array.isArray(s.data.data)?s.data.data:[];b(a)}catch(s){console.error("Fetch permissions error:",s)}finally{x(!1)}};n.useEffect(()=>{c()},[]);const m=s=>{const{name:a,value:v}=s.target;i(P=>({...P,[a]:v}))},j=async s=>{if(s.preventDefault(),d(""),!t.name.trim()){d("Nama permission wajib diisi");return}try{r?await o.put(`/permissions/${r}`,t):await o.post("/permissions",t),i({name:"",description:"",guard_name:"web"}),l(null),c()}catch(a){console.error("Save permission error:",a),d(a.response?.data?.message||"Gagal menyimpan permission")}},f=s=>{i({name:s.name,description:s.description||"",guard_name:s.guard_name||"web"}),l(s.id)},N=async s=>{if(window.confirm("Yakin ingin menghapus permission ini?"))try{await o.delete(`/permissions/${s}`),c()}catch(a){console.error("Delete permission error:",a),alert(a.response?.data?.message||"Gagal menghapus permission")}},w=new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});return e.jsxs("div",{className:"min-h-screen p-4 bg-gray-100 text-gray-800 text-[14px]",children:[e.jsx("h2",{className:"text-[16px] font-bold mb-4",children:"Manajemen Permission"}),e.jsxs("div",{className:"bg-white p-4 rounded shadow mb-6 max-w-md no-print",children:[e.jsx("h3",{className:"font-semibold mb-2",children:r?"Edit Permission":"Tambah Permission"}),u&&e.jsx("p",{className:"text-red-500 mb-2",children:u}),e.jsxs("form",{onSubmit:j,className:"space-y-2",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Nama Permission",value:t.name,onChange:m,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"text",name:"description",placeholder:"Deskripsi",value:t.description,onChange:m,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{name:"guard_name",value:t.guard_name,onChange:m,className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"web",children:"web"}),e.jsx("option",{value:"sanctum",children:"sanctum"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:r?"Update":"Tambah"}),r&&e.jsx("button",{type:"button",onClick:()=>{i({name:"",description:"",guard_name:"web"}),l(null)},className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500",children:"Batal"})]})]})]}),e.jsx("div",{className:"mb-4 no-print",children:e.jsx("button",{onClick:y,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Print"})}),e.jsxs("div",{ref:h,className:"bg-white p-4 rounded shadow max-w-4xl",children:[e.jsxs("div",{className:"print-only text-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Laporan Daftar Permission"}),e.jsxs("p",{children:["Tanggal cetak: ",w]})]}),e.jsxs("table",{className:"w-full table-auto border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-4 py-2 text-left",children:"#"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Nama"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Deskripsi"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Guard"}),e.jsx("th",{className:"border px-4 py-2 text-left no-print",children:"Aksi"})]})}),e.jsx("tbody",{children:g?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-4",children:"Loading..."})}):p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-4",children:"Tidak ada data"})}):p.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",children:a+1}),e.jsx("td",{className:"border px-4 py-2",children:s.name}),e.jsx("td",{className:"border px-4 py-2",children:s.description||"-"}),e.jsx("td",{className:"border px-4 py-2",children:s.guard_name}),e.jsxs("td",{className:"border px-4 py-2 space-x-2 no-print",children:[e.jsx("button",{onClick:()=>f(s),className:"px-2 py-1 bg-yellow-400 text-white rounded hover:bg-yellow-500",children:"Edit"}),e.jsx("button",{onClick:()=>N(s.id),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Hapus"})]})]},s.id))})]})]})]})};export{C as default};
