import{a as s}from"./app-D5LrGWPf.js";import{y as c}from"./index-_iQ4wFyz.js";const n=(e,a)=>{console.error("API Error:",e.response?.data||e.message);const r=e.response?.data?.message||e.response?.data?.errors?Object.values(e.response?.data?.errors).flat().join(", "):a;throw c.error(r),e},t={_cache:null,getAll:async(e=!1)=>{try{if(t._cache&&!e)return t._cache;const a=await s.get("/karyawan");let r=a.data?.data;return Array.isArray(r)||(Array.isArray(a.data)?r=a.data:a.data?.karyawan?r=a.data.karyawan:r=[]),t._cache=r,r}catch(a){return n(a,"Gagal mengambil daftar karyawan"),[]}},getById:async e=>{try{const a=await s.get(`/karyawan/${e}`);return a.data?.data||a.data||{}}catch(a){n(a,"Gagal mengambil detail karyawan")}},create:async e=>{try{const a=await s.post("/karyawan",e,{headers:{"Content-Type":"multipart/form-data"}});return c.success(a.data?.message||"Karyawan berhasil ditambahkan"),t._cache=null,a.data}catch(a){n(a,"Gagal menambahkan karyawan")}},update:async(e,a)=>{try{const r=await s.post(`/karyawan/${e}?_method=PUT`,a,{headers:{"Content-Type":"multipart/form-data"}});return c.success(r.data?.message||"Karyawan berhasil diperbarui"),t._cache=null,r.data}catch(r){n(r,"Gagal memperbarui karyawan")}},delete:async e=>{try{const a=await s.delete(`/karyawan/${e}`);return c.success(a.data?.message||"Karyawan berhasil dihapus"),t._cache=null,a.data}catch(a){n(a,"Gagal menghapus karyawan")}}};export{t as k};
